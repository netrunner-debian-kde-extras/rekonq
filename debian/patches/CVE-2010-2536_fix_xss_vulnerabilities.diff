From 1fd48c700abb6d7ff56fded1e39a1418cc573216 Mon Sep 17 00:00:00 2001
From: Andrea Diamantini <adjam7@gmail.com>
Date: Sat, 31 Jul 2010 01:08:41 +0200
Subject: [PATCH] Applying Eelko's patch against XSS vulnerability

Are we yet vulnerable?

CCBUG:217464
---
 src/webpage.cpp |    4 ++--
 1 files changed, 2 insertions(+), 2 deletions(-)

diff --git a/src/webpage.cpp b/src/webpage.cpp
index a63940b..ea2add6 100644
--- a/src/webpage.cpp
+++ b/src/webpage.cpp
@@ -577,8 +577,8 @@ QString WebPage::errorPage(QNetworkReply *reply)
         return QString("Couldn't open the rekonqinfo.html file");
     }
 
-    QString title = i18n("Error loading: %1", reply->url().toString());
-    QString urlString = reply->url().toString(QUrl::RemoveUserInfo | QUrl::RemoveQuery);
+    QString title = i18n("There was a problem while loading the page");
+    QString urlString = reply->url().toString(QUrl::RemoveUserInfo | QUrl::RemoveQuery | QUrl::RemovePath);
 
     QString iconPath = QString("file://") + KIconLoader::global()->iconPath("dialog-warning" , KIconLoader::Small);
     iconPath.replace(QL1S("16"), QL1S("128"));
-- 
1.6.1

